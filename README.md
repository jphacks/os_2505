# 前を向いて歩こう

<img width="1920" height="1080" alt="JuMiNer_1" src="https://github.com/user-attachments/assets/c39b8ac5-7f87-4dde-8ed4-a378b3da1f44" />


## 製品概要
### 背景(製品開発のきっかけ、課題等）
「歩きスマホ」は、人や物との衝突や転倒を引き起こすだけでなく、最悪の場合には電車・自動車との接触事故など命に関わる危険行為となり、大きな社会問題となっています。
しかし、現代社会では完全にスマホを見ながら歩く行為を無くすことは現実的に困難です。

NTTドコモ モバイル社会研究所の実態調査によると、4割以上の人が日常的に歩きスマホを行っており、特に10〜20代の若年層では男女とも6割を超えることが明らかになっています。
つまり、多くの人がその危険性を認識しながらも、**便利さを優先せざるを得ない状況**にあるのが現状です。

また、鉄道・バスなどの公共交通機関の利用時や、ナビゲーション・地図アプリの操作時など、
「立ち止まって確認した方が安全」と分かっていても、時間的制約や状況の都合で歩きながら見てしまうケースも多く存在します。


### 提案手法
そこで本プロジェクトでは、歩きスマホを単に「防止」や「禁止」するのではなく、
スマホを持ちながらでも「**より安全に利用できる**」行動を促すという新たなアプローチを提案します。
すなわち、「危険を減らす」ことで、より安心できる社会を実現することを目指しています。

鳥取大学の研究によると，歩行者が下を向いてスマホを利用しているときと、前を向いてスマホを利用しているときとでは、前方の方が、歩行者が発見しやすいということが報告されてます。
ここから、歩行時にスマホを利用しているユーザーが前を向いて歩けるように誘導できれば、歩きスマホによる衝突リスクの低減が可能であると考えました。
### 製品説明（具体的な製品の説明）
本製品はスマホ（現在はAndroid限定）上で動作するアプリケーションで、大きく分けて以下の3つの機能を持っています。
### 機能
#### 1. 機能1　　　　歩行時にスマホが下を向いている時は、スマホの使用をロック
   <img width="2475" height="2409" alt="JuMiNer_2" src="https://github.com/user-attachments/assets/4b6d3782-8cb5-450e-8d19-a89e6af10707" />
   
#### 2. 機能2　　　　歩行時にスマホが前を向いている時は、スマホは使用可能
#### 3. 機能3　　　　停止時はいつも通りに使用可能

### 解決出来ること
上記の機能を搭載することで、歩行時は前を向きながらでないとスマホが利用できなくなります。
これにより歩きスマホにおける衝突の危険を低減することができます！
### 今後の展望
* iphone端末への拡張
* 電車などに乗っている場合には使用可能になるようにする
* 保護者などの第三者が利用者に強制できるように、スマホロック機能のオンオフを反映
* スマホごとにジャイロセンサの測定周波数が異なるので、扱うスマホに応じて平滑化フィルタのウィンドウを調整できるようにする（これが出来なくて本番中に停止状態が判別しにくくグダってしまった）
### 注力したこと（こだわり等）
* センサー融合で誤検知を抑制

 線形加速度の2秒窓RMS＋ヒステリシス＋ホールド時間で「歩行中」を安定判定。
 
 姿勢は「正面=0°・下向きほど負」の規約で統一し、TiltMath による基準補正で端末差を吸収。
* UXと省電力の両立

 状態変化時だけオーバーレイ add/remove（チラつき・無駄描画を抑制）。

## 開発技術
### 活用した技術
#### API・データ・IDE
* Android Studio
* Android SDK / AndroidX
  * SensorManager（TYPE_ROTATION_VECTOR / TYPE_ACCELEROMETER / TYPE_LINEAR_ACCELERATION）
  * WindowManager オーバーレイ（TYPE_APPLICATION_OVERLAY / SYSTEM_ALERT_WINDOW）
  * Foreground Service（android.permission.FOREGROUND_SERVICE_DATA_SYNC）
  * ランタイム権限（POST_NOTIFICATIONS）
  * ブロードキャスト受信（RECEIVER_NOT_EXPORTED / API33+ フラグ対応）
* Material 3 / AppCompat / ConstraintLayout

#### フレームワーク・ライブラリ・モジュール
* 自作モジュール
  * sensor：SensorRepository / PoseProvider（姿勢取得）
  * motion：MotionDetector（線形加速度RMSで動作判定）
  * util：Hysteresis（ヒステリシス）/ TiltMath（基準補正・角度処理）
  * service：GuardService（常駐・オーバーレイ制御）
  * ui：MainActivity（オン/オフトグル、権限誘導）

#### デバイス
* Android スマートフォン（Android 15）

### 独自技術
#### ハッカソンで開発した独自機能・技術
* 歩行中 AND 下向き検知での完全ブロック

  線形加速度の2秒窓RMS＋ヒステリシス＋持続条件（デバウンス）で「動作中」を安定判定し、姿勢（ピッチ）とANDして発火。
* オーバーレイでの視覚・操作の完全遮断

  WindowManager による全画面オーバーレイで黒背景＋注意画像を表示。タッチはオーバーレイ側で吸収し下層へ渡さず、ホーム/戻る等のシステムキーはOS既定のまま。
* 省電力・快適性の工夫

  状態変化時のみオーバーレイの add/remove を行い、無駄な再描画やトグルを抑制。通知は低重要度チャンネルで常駐。

## 参考
### デモ動画リンク

https://youtu.be/Qn51z2EV5Ic?si=rOwxWYA50znY0R1E

apkファイル（未デプロイなのでセキュリティ上の問題からダウンロードは未推奨です）

https://drive.google.com/file/d/1J-SfHibOaDnI27V1ail8_NMdbOCoavQ6/view?usp=sharing
